# 完整操作步骤指南

## 📋 准备工作

### 第0步：确保插件已重新加载

1. 打开Chrome，地址栏输入：`chrome://extensions/`
2. 找到 "Smart Page Scribe"
3. 确认右下角没有错误提示
4. 点击 **🔄 重新加载** 按钮

---

## 🎯 完整测试流程（推荐新手）

### 方案A：不使用AI（最简单，5分钟）

这个方案**不需要配置API**，适合快速测试录制功能。

#### 步骤1：打开测试页面

```
1. 打开新标签页
2. 访问：https://www.baidu.com
3. 或者访问：https://example.com
```

#### 步骤2：刷新页面（重要！）

```
1. 按 F5 刷新页面
2. 或点击刷新按钮
```

**为什么要刷新？** Content Script 需要在页面加载时注入。

#### 步骤3：开始录制

```
1. 点击浏览器工具栏的插件图标（紫色图标）
2. 在弹出窗口中点击 "⏺ 开始录制" 按钮
3. 弹出窗口会自动关闭
```

**验证：**
- 插件图标应该变化（可能变红或显示录制状态）
- 如果有提示，说明录制开始

#### 步骤4：执行操作

```
在页面上进行一些操作，例如：

对于百度：
1. 点击搜索框
2. 输入文字（如：测试）
3. 点击"百度一下"按钮

对于 example.com：
1. 点击页面上的链接
2. 多点击几个不同的元素
```

**验证：**
- 每次点击应该看到**红色波纹效果**
- 说明点击被记录了

#### 步骤5：停止录制

```
1. 再次点击浏览器工具栏的插件图标
2. 在弹出窗口中点击 "⏹ 停止录制" 按钮
```

**验证：**
- 显示 "✅ 录制完成！"
- 显示步骤总数，如 "共记录 5 个步骤"
- 出现 "📄 打开编辑器" 按钮

#### 步骤6：打开编辑器

```
1. 点击 "📄 打开编辑器" 按钮
2. 侧边栏会在浏览器右侧打开
```

**验证：**
- 侧边栏打开
- 显示 "智能推测您可能想生成的文档："
- 显示2-3个描述选项（因为是默认选项，不是AI生成的）

**如果没有API，会显示：**
```
在 example.com 页面的操作指南
5步操作流程记录
```

#### 步骤7：生成文档

```
1. 选择其中一个描述（点击单选按钮）
2. 或者选择 "其他" 输入自定义描述
3. 点击 "✨ 生成文档" 按钮
```

**注意：** 如果没有配置API，会使用简化的模板生成文档。

#### 步骤8：查看文档

```
1. 等待几秒（使用默认选项会很快）
2. 侧边栏会显示生成的Markdown文档
3. 默认在预览模式
```

**验证：**
- 看到文档内容
- 有步骤标题
- 有操作描述

#### 步骤9：编辑和导出

```
可以尝试：

1. 点击 "✏ 编辑" 按钮
   - 切换到编辑模式
   - 可以直接修改Markdown文本

2. 点击 "👁 预览" 按钮
   - 切换回预览模式
   - 查看渲染效果

3. 点击 "📋 复制" 按钮
   - 复制整个文档到剪贴板
   - 可以粘贴到记事本等

4. 点击 "💾 下载" 按钮
   - 下载为 .md 文件
   - 保存到本地
```

**完成！** 🎉

---

### 方案B：使用DeepSeek AI（完整功能）

这个方案**需要配置API**，但功能更强大。

#### 步骤1：获取DeepSeek API Key

```
1. 访问：https://platform.deepseek.com/
2. 注册/登录
3. 进入：https://platform.deepseek.com/api_keys
4. 点击 "Create API Key"
5. 复制API Key（格式：sk-xxxxx...）
```

#### 步骤2：配置插件

```
1. 点击插件图标 → "⚙️ 设置"
2. 填写配置：

   API Key:      sk-xxxxxxxxxxxxx（粘贴您的密钥）
   Base URL:     https://api.deepseek.com
   模型名称:     deepseek-chat

3. 点击 "🔍 测试连接"
   - 应该显示："✅ 连接成功！API配置有效"

4. 点击 "💾 保存配置"
   - 应该显示："✅ 配置已保存"
```

#### 步骤3：刷新页面并重新开始

```
重复方案A的步骤1-8
```

**区别：**
- 停止录制后，AI会自动分析操作
- 生成**智能的描述选项**（更准确）
- 生成**更详细的文档**

**AI生成示例：**
```
智能推测您可能想生成的文档：

○ 百度搜索功能使用教程
○ 在百度上搜索关键词的操作步骤
○ 百度搜索框使用指南
```

选择一个后，生成的文档会更详细，包含：
- 清晰的步骤说明
- 操作细节注释
- 注意事项章节

---

## 🔍 故障排查

### 问题1：点击"开始录制"没反应

**解决步骤：**
```
1. 刷新当前页面（F5）
2. 重新点击插件图标
3. 点击"开始录制"
```

### 问题2：点击操作没有被记录

**检查：**
```
1. 确认页面已刷新
2. 确认插件图标显示录制状态
3. 在Console查看错误（F12 → Console）
```

### 问题3：侧边栏打开但显示错误

**查看错误：**
```
1. 右键点击侧边栏 → "检查"
2. 切换到 Console 标签
3. 查看红色错误信息
4. 截图或复制错误信息
```

### 问题4：API连接失败

**检查配置：**
```
1. API Key 是否正确？（sk-开头）
2. Base URL 是否正确？
   - DeepSeek: https://api.deepseek.com
   - OpenAI: https://api.openai.com/v1
3. 网络连接是否正常？
4. API账户是否有余额？
```

**测试方法：**
```bash
# 在浏览器Console测试DeepSeek
fetch('https://api.deepseek.com/chat/completions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer sk-你的密钥'
  },
  body: JSON.stringify({
    model: 'deepseek-chat',
    messages: [{role: 'user', content: 'Hi'}],
    max_tokens: 5
  })
}).then(r => r.json()).then(console.log)
```

---

## 📸 操作截图说明

### 录制状态

**未录制：**
```
┌─────────────────────┐
│  📝 SmartPage Scribe│
│                     │
│  ⚪ 未录制          │
│                     │
│  [⏺ 开始录制]      │
│  点击开始录制您的操作│
│  流程               │
└─────────────────────┘
```

**录制中：**
```
┌─────────────────────┐
│  🔴 正在录制 (5步)  │
│                     │
│  [⏹ 停止录制]      │
└─────────────────────┘
```

**已停止：**
```
┌─────────────────────┐
│  ✅ 录制完成！      │
│  共记录 5 个步骤    │
│                     │
│  [📄 打开编辑器]    │
│  [🔄 新建录制]      │
└─────────────────────┘
```

---

## 💡 最佳实践

### 推荐的测试场景

**场景1：记录登录流程**
```
1. 打开登录页面
2. 刷新页面
3. 开始录制
4. 输入用户名
5. 输入密码
6. 点击登录按钮
7. 停止录制
8. 生成文档
```

**场景2：记录搜索操作**
```
1. 打开百度/Google
2. 刷新页面
3. 开始录制
4. 点击搜索框
5. 输入关键词
6. 点击搜索按钮
7. 点击某个搜索结果
8. 停止录制
9. 生成文档
```

**场景3：记录表单填写**
```
1. 打开表单页面
2. 刷新页面
3. 开始录制
4. 填写各个字段
5. 选择选项
6. 点击提交
7. 停止录制
8. 生成文档
```

---

## ✅ 成功标志

当您看到以下内容时，说明测试成功：

1. ✅ 录制中每次点击有红色波纹
2. ✅ 停止后显示步骤总数
3. ✅ 侧边栏能正常打开
4. ✅ 显示描述选择界面
5. ✅ 能生成文档
6. ✅ 文档可以预览、编辑、复制、下载

---

## 🎓 快速检查清单

```
□ 插件已加载（chrome://extensions/）
□ 图标显示在工具栏
□ 配置了API（可选）
□ 测试页面已打开
□ 测试页面已刷新
□ 点击"开始录制"
□ 执行了操作（看到红色波纹）
□ 点击"停止录制"
□ 侧边栏打开
□ 显示描述选项
□ 选择描述并生成文档
□ 文档正常显示
```

全部完成？恭喜您成功使用了插件！🎉

---

## 📞 需要帮助？

如果遇到问题，请提供：

1. **在哪一步卡住了？**
   - 例如："步骤5停止录制后"
   - 例如："点击生成文档后"

2. **看到了什么错误？**
   - Console中的错误信息
   - 或屏幕截图

3. **使用了哪个方案？**
   - 方案A（不使用AI）
   - 方案B（使用DeepSeek/OpenAI）

我会根据具体情况帮您解决！
