# 文档上传功能实现说明

## 功能概述
为Smart Page Scribe浏览器插件添加了文档上传功能，支持PDF、DOCX、TXT格式文档的上传、管理和使用。

## 实现的功能

### 1. 文档上传模块 (utils/documentUpload.js)
- 支持PDF、DOCX、TXT格式文档上传
- 文件格式验证
- 文档内容读取和解析（基础框架，需集成具体解析库）
- 本地存储管理

### 2. 文档API接口 (utils/documentApi.js)
- 上传请求处理
- 文档列表获取
- 文档内容检索
- 文档删除功能
- 文档搜索功能

### 3. 文档关联机制 (utils/documentLinker.js)
- 文档与代码的关联功能
- 代码类型检测
- 函数名提取
- 关联数据管理

### 4. 设置界面文档管理 (settings/)
- 新增文档上传区域
- 拖拽上传支持
- 进度显示
- 文档列表展示
- 搜索功能
- 查看和删除文档功能

### 5. 侧边栏文档管理 (sidepanel/)
- 侧边栏文档管理入口
- 快速文档上传功能
- 文档列表查看
- 搜索功能

### 6. 后台服务支持 (background/)
- 文档相关消息处理
- 存储管理
- 文档关联处理

### 7. 文件结构调整
- 创建了 `/docs` 目录用于存储文档
- 更新了 `manifest.json` 添加必要权限

## 技术细节

### 权限变更
- 添加了 `unlimitedStorage` 权限以支持大量文档存储
- 更新了 `web_accessible_resources` 以包含文档资源

### 存储结构
- 文档信息存储在 `chrome.storage.local` 的 `documents` 键下
- 文档关联信息存储在 `documentCodeLinks` 键下

### 文件格式支持
- **PDF**: 需要集成PDF.js库进行完整解析
- **DOCX**: 需要集成docx库进行完整解析
- **TXT**: 已支持纯文本解析

## 扩展性
该功能设计具有良好的扩展性：
- 可轻松添加新的文档格式支持
- 可扩展文档关联功能
- 可集成云存储服务替代本地存储

## 待完善的功能
1. PDF解析需要集成PDF.js库
2. DOCX解析需要集成docx库
3. 可以添加文档预览缩略图
4. 可以添加文档分类功能
5. 可以添加文档分享功能

## 使用方法
1. 在设置页面或侧边栏点击文档管理
2. 选择文件或拖拽上传
3. 在文档列表中查看、搜索或删除文档
4. 可以将文档内容用于AI分析